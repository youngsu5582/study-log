---
  tags:
  - 테스트
  도서명: "단위 테스트 : 생산성과 품질을 위한 단위 테스트 원칙과 패턴"
  저자명: 블라디미르 코리코프
  aliases:
  - Unit Testing Principles, Practices, and Patterns
---
#### 런던파

런던파는 대상 시스템을 다른 의존성 에게서 격리 하는 것
-> 모든 의존성들을 테스트 대역으로 대체

- 테스트가 실패하면 테스트 대상만 고장 났음을 보장
- 객체 그래프 분할 가능
#### 고전파

대상 시스템 과 의존성 모두 필요
-> 여러 클래스를 한 번에 테스트
상태를 통해 검증

왠만하면 고전파를 통해 구현하자

##### 한 번에 한 클래스만 테스트
테스트는 코드 단위를 검증하는게 아닌 , 단위를 검증해야함
##### 상호 연결된 클래스 의 큰 그래프 단위 테스트
SUT를 설정하려면 전체 객체 그래프 다시 생성해야 함
-> 그래프가 복잡하면 애초에 설계가 잘못 된거 아닐까?
##### 버그 위치 정확히 찾아내기
고전파를 통해 많은 테스트 결함으로 이어진다면 , 고장 낸 코드 조각이 큰 가치가 있음을 인지 가능함

---

- 고전파에서는 단위 테스트를 상향식 TDD로 진행 ( 도메인 모델부터 -> 최종 사용자 비즈니스 로직 )

- 테스트는 준비 / 실행 / 검증 세 부분으로 나눈다 - AAA / Given - When - Then

준비 구절에서 SUT , 의존성 세팅

실행 구절에서 메소드 호출하고 출력 값 캡처

검증 구절에서 결과 검증

- 테스트 대상 시스템 클래스를 그냥 sut 로 선언하자

- 단일 작업 수행에 두 개의 메소드 호출을 하지말자 - 비즈니스 관점에서 같이 수행되야 하는 로직은 하나에 포함되어야 함

- 실행 구절이 꼭 한줄일 필요는 없으나 , 캡슐화를 위반한 건 아닌지 확인하자

- 대부분의 단위 테스트에서는 종료 단계가 필요없다 ( 테스트에 의한 작성 파일 지우거나 , DB 연결 종료할 떄 )

- 픽스처는 외부 클래스에 static 메소드나 , 내부 클래스에 private 메소드로 재사용하자
	( 생성자에서 선언하는건 매우 안티 패턴 - 모든 테스트 영향 미침 , 가독성 하락 )

---

- 테스트 명에 메소드 명을 포함하지 말자 - 애플리케이션 단에서 동작 테스트 + 메소드 이름 변경은 아무런 영향을 주지 않음

- 테스트 명은 비개발자적 접근을 하자 - 시나리오 설명하듯이

- `ParameterizedTest` 가 꼭 최선은 아님 - 좋은 메소드명이 아니면 파악하기 어려워진다
	-> 테스트 코드양 과 코드 가독성은 서로 상충되는 느낌
