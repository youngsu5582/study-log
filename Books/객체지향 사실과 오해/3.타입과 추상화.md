---
tags:
  - 리팩토링
도서명: 객체지향의 사실과 오해
저자명: 조영호
---
### 추상화를 통한 복잡성 극복

복잡성의 총체인 현실앞에서
인간이 지닌 인지 능력 & 저장 공간은 너무나도 보잘것 없음

-> 사람들이 본능적으로 이해하기 쉽고 예측 가능 수준으로 현실 분해 & 단순화 하는 전략을 따라야 한다

지하철 노선도에 거리 & 지형이 필요한가?
-> 역과 역 사이 연결 관계 만으로 OK

=> 진정한 의미의 추상화란 현실에서 출발하나 , 불필요한 부분을 도려내서 본질이 드러나게 하는 것

> 양상 , 세부 사항 , 구조를 좀 더 명확히 이해하기 위해 
> 특정 절차 , 물체 의도적 생략 또는 감춰서 복잡도를 극복하는 방법

- 첫 번째 차원은 구체적 사물들 간 공통점을 취하고 , 차이점은 버리는 일봔하를 통해 단순하게 만드는 것
- 두 번째 차원은 중요한 부분을 강조하기 위해 불필요한 세부 사항 제거해 단순하게 만드는 것
#### 객체지향과 추상화

앨리스가 마주친
세 명의 스페이드 정원사 , 열 명의 다이아몬드 신하 , 하트 왕과 하트 잭?
-> 모두 결국은 트럼프!
##### 개념

인간은 수많은 객체들을 개별적 단위로 취급하기에는 인지능력이 턱없이 부족하다 - 이는 필연적
-> 공통적 특성 기준으로 객체를 여러 그룹으로 묶어 가짓수를 줄여 상황 단순화 하려고 노력

길거리를 다니는 바퀴 4개 달린 교통수단? -> 자동차!
하늘 날아다니는 교통수단? -> 비행기!

객체는 그 개념의 인스턴스

>객체는 특정한 개념 적용할 수 있는 구체적 사물을 의미
>개념이 객체에 적용됐을 때 객체를 개념의 인스턴스
##### 개념의 세 가지 관점

- 심볼(symbol) : 개념을 가리키는 간단한 이름이나 명칭
- 내연(intension) : 개념의 완전한 정의 , 내연의 의미를 이용해 객체가 개념에 속하는지 여부 확인
- 외연(extension) : 개념에 속하는 모든 객체 집합

심볼이란 개념을 가르키는 이름 ( '트럼프' 는 심볼 )
내연이란 개념의 의미 ( '두 손 , 두 발이 네모난 몸 모서리에 달려있다' 는 내연 )
외연이란 개념에 속하는 객체들 ( 정원사 , 병사 , 신하 , 공주 ... 는 외연 )

( class 역시도 classification(분류) 에서 파생된 개념! )
##### 분류

분류란 특정 객체를 특정 개념 객체 집합에 포함 시키거나 포함 시키지 않는 작업 ( 특정 개념을 적용 )

분류 역시 가장 <span style="color:#fb3c3c">중요한 개념 중 하나</span>
-> 어떤 객체를 어떤 개념으로 분류할지가 품질을 결정
( 적절할 수록 유지보수가 용이하고 , 변경에 유연하게 대처 가능 )

- 분류는 추상화를 하기 위한 도구
( 개념을 통해 객체를 분류하는 과정은 추상화 두가지 차원을 모두 사용! )
#### 타입

개념이란 단어는 일상생활에서 폭 넓게 사용되는 일상적 용어이지만
이 개념을 대체하고 좀 더 세련된 용어를 수학에서 차용
=> 타입(type)
- 타입 과 개념은 동일

하지만 , 결국 컴퓨터 내부로 들어오는 순간 기계적인 의미로 윤색
##### 데이터 타입

메모리에 있는 데이터들은 무수히 많은 0과 1로 치장
-> 타입이란 질서 존재 X ( 비트열로만 구성되어 있으므로 )
=> 메모리 안 데이터에 특정한 의미를 부여하기 시작

어떤 데이터에 다른 데이터 더하거나 빼면? -> 숫자형!
데이터가 여러 문자 구성 & 연결 된다면? -> 문자열형!
...

이렇게 데이터를 목적에 따라 구분하며 <span style="color:#00b0f0">타입 시스템</span>이 자라나기 시작함

- 타입은 어떻게 사용되느냐에 관한 것 ( 어떤 데이터가 어떤 연산자에 적용 가능한지가 타입을 결정 )
- 타입에 속한 데이터를 메모리에 어떻게 표현하는지 철저히 감춰져 있음

> 데이터 타입은 메모리 안 저장된 데이터 종류 분류하는데 사용하는 메모리 집합 관한 메타데이터
##### 객체와 타입

객체는 데이터인가?
-> 객체에서 중요한 것은 객체의 행동!

가장 중요하게 고려할 점은 언제나 객체가 이웃 객체와 협력하기 위해 어떤 행동을 해야 하는지 결정하는 것

어떤 객체가 어떤 타입에 속하는지 결정하는 것은? -> 객체가 수행하는 행동을 통해 결정
( 어떤 객체들이 동일한 행동을 수행한 다면 ? 동일한 타입으로 분류 )

객체의 내부적인 표현은 외부로부터 철저하게 감춰진다
-> 효과적으로 수행할 수만 있다면 내부 상태를 어떤 방식으로 표현하더라도 무방
##### 행동이 우선이다

- 첫 번째 조언  : 객체가 어떤 행동을 하느냐 따라 객체 타입이 결정된다
- 두 번째 조언 : 객체 타입은 객체 내부 표현과 아무런 상관 없다

=> <span style="color:#fb3c3c">내부 표현 방식이 다르더라도</span> 어떤 객체들이 <span style="color:#00b050">동일 행동</span>한다면 객체들은 동일 타입에 속함
- 어떤 데이터를 가지는지는 관심사가 아님

같은 타입 속한 객체는 행동만 동일하다면 , 서로 다른 데이터를 가져도 OK
( 데이터가 다르므로 , 데이터 표현 방식이 다르더라도 동일 메시지 수신 ) -> 다형성

데이터 내부 표현 방식과 무관하게 행동만 고려 대상 -> 캡슐화

=> 데이터-주도-설계를 해결하기 위해 객체지향 적인 책임-주도 설계
#### 타입의 계층

정원사 , 병사 , 신하 , 왕자와 공주 , 하객 참석한 ... 들은 왜 전부 트럼프가 아닌가?
-> 객체가 동일한 타입으로 분류 되기 위해서는 공통 행동을 가져야 한다!

트럼프 카드가 `납작 엎드리고 뒤집어질 수 있다` 와 같은 행동을 할 수 있나?
=> 트럼프 카드가 아닌 트럼프 인간! ( 좀 더 특화된 행동 하는 트럼프 )

트럼프 인간은 트럼프 인간인 동시에 트럼프이다

- 트럼프는 트럼프 인간을 포괄하는 좀 더 일반적인 개념
- 트럼프 인간은 트럼프 보다 좀 더 특화된 특수한 개념
=> 두 개념 사이 관계를 일반화 / 특수화
##### 일반화 / 특수화 관계

타입 과 타입 사이에는 일반화 / 특수화 관계가 존재
-> 이 둘은 동시에 일어난다!

- 더 특수하다는 것은 일반적 개념보다 더 좁아진다는 것
	-> 트럼프 인간이 트럼프 개체보다 적은게 당연!

여기서 중요한 것은 객체 상태를 표현하는 데이터가 아닌 <span style="color:#00b0f0">행동</span>을 통해 <span style="color:#fb3c3c">일반화 / 특수화</span> 관계를 결정한다는 것!
( 즉 , 특수한 관계는 다른 관계보다 더 특수하게 행동해야 함 )


타입 내연을 의미하는 행동 가짓수 <-> 집합의 크기
( 당연히 , 더 적은 수 행동 하면 더 많고 , 더 많은 행동 하면 더 적어짐 )

```
여기서 궁금한 점으론
interface 는 행동을 규약 , abstract class 는 상태를 규약

그러면 , 체스 기물들의 경우에는 각각의 행동은 결국 canMove 와 move 로 규정이 된다.
-> 그렇다고 interface 로 규약을 해야 하는가?
```
##### 슈퍼타입 , 서브타입

일반적인 타입을 슈퍼타입 , 특수한 타입을 서브 타입

-> 어떤 타입이 다른 타입의 서브 타입이 되기 위해선 행위적 호환성을 만족해야 함

그렇기에 슈퍼 타입의 행동은 자동으로 서브 타입에 상속 된다
##### 일반화는 추상화를 위한 도구

추상화의 두 번째 차원?
-> 중요 부분 강조를 위해 불필요한 세부 사항을 제거 시켜 단순하게 만드는 것

엘리스의 "기껏해야 트럼프에 불과해" 라 생각했을 때
트럼프 인간의 특수한 능력을 제거하고 , 쉽게 뒤지어지는 트럼프의 특성에 집중

-> 트럼프 특성에만 집중 하고 , 트럼프 인간의 특성을 제거해 상황을 단순하게 만들었다

- 등장인물들의 차이점을 배제하고 공통점 만을 강조 -> 공통 타입으로 본류
- 트럼프 인간을 좀 더 단순한 관점에서 바라보기 위해 불필요한 특성 배제 -> 포괄적 의미로 일반화

=> 객체지향적으로 볼때 분류와 일반화 / 특수화 기법이 동시에 적용이 된다
#### 정적 모델
##### 타입의 목적

왜 타입을 사용할까?
객체지향은 객체 지향하는 것이므로 객체만 다루면 되지 않는가?
-> 인간의 인지 능력으로는 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문

=> 키는 계속 변하지만 , 엘리스 본연은 변하지 않는다
( 객체의 상태는 변하지만 , 객체의 식별성은 동일하게 유지 )

엘리스 ( 키 = 100cm ) -> 엘리스 ( 키 = 80cm ) -> 엘리스 ( 키 = 300cm ) -> 엘리스 ( 키 = 40cm )

=> 엘리스 ( 키 , 버섯을 먹다 , 음료를 마시다 , 부채질하다 )

타입을 통해 시간에 따라 동적 변하는 엘리스의 상태를 시간과 무관한 정적 모습으로 생각하게 해준다
##### 그러기에 결국 타입도 추상화이다

그러기에 타입 역시 추상화이다

특정 시점 엘리스에 대해 생각할 때 불필요한 <span style="color:#00b0f0">시간</span>이라는 요소 와 <span style="color:#00b0f0">상태 변화</span> 라는 요소를 제거하고
정적인 관점에서 엘리스의 모습을 묘사하는 것이 가능하게 해준다

타입을 이용해 객체의 동적인 특성을 추상화가 가능한 것이다
##### 동적 모델 과 정적 모델

객체를 생각할 때 이렇게 두 가지 모델을 동시에 고려한다

- 객체가 특정 시점 구체적으로 어떤 상태를 가지는지 표현
-> 객체의 스냅샷
( UML 에서 객체 다이어그램이라고도 불림 )
객체가 살아 있는 동안 상태가 어떻게 변하고 어떻게 행동하는지 포착하므로 <span style="color:#00b0f0">동적 모델</span> 

- 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현
-> 객체의 타입 모델
객체의 상태가 아닌 객체가 속한 타입의 정적 모습을 표현하므로 <span style="color:#fb3c3c">정적 모델</span> 
##### 클래스

객체지향 프로그래밍 언어에서 정적 모델은 대부분 클래스를 이용해 구현
-> 클래스 와 타입은 동일한 것이 아니다

타입은 객체를 분류하기 위해 사용하는 개념
( 클래스는 단지 타입을 구현할 수 있는 여러 구현 매커니즘 중 하나임! )

-> 클래스 와 타입을 구분하여 설계를 유연하게 유지하도록 의식하자

---

객체를 분류하는 기준은 타입 -> 타입을 나누는 기준은 객체가 수행하는 행동!

타입을 결정 후 , 프로그래밍 언어를 이용해 타입을 구현할 수 있는 한 가지 방법이 클래스일뿐이다

객체지향에서 중요한 것은 동적으로 변하는 객체의 <span style="color:#00b0f0">상태</span> 와 상태를 변경하는 <span style="color:#fb3c3c">행위</span>다
클래스는 타입을 구현하기 위해 제공되는 구현 매커니즘

