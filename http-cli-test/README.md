### httpie란 무엇인가?

`brew install httpie`

`httpie`는 인간을 위해 설계된 커맨드라인 HTTP 클라이언트입니다. 터미널에서 API를 테스트하고, HTTP 서버와 상호작용하는 과정을 더 쉽고 직관적으로 만들어주는 도구입니다.

* 대체하는 기존 명령어: curl, wget (특히 API 테스트 및 디버깅 용도)

curl이 강력하지만 문법이 복잡하고 결과물을 그대로 출력하는 반면, httpie는 개발자 경험에 초점을 맞춰 다음과 같은 핵심 장점을 제공합니다.

* 직관적인 문법: curl의 수많은 옵션 대신, 훨씬 이해하기 쉬운 명령어를 사용합니다.
* 아름다운 출력: JSON 응답을 자동으로 들여쓰기하고, 문법에 맞춰 다채로운 색상을 입혀 보여줍니다. 헤더와 본문을 명확히 구분하여 가독성이 매우 높습니다.
* 똑똑한 기본값: 사용자의 의도를 예측하여 Content-Type 같은 헤더를 자동으로 설정해주는 등 편리한 기본 동작을 제공합니다.
* 최신 웹 기능 내장: JSON, 폼(Form), 인증, 세션 등 현대적인 웹 애플리케이션을 다루기 위한 기능들이 사용하기 쉽게 내장되어 있습니다.

결론적으로 httpie는 API 개발과 테스트라는 특정 목적에 맞춰, curl의 복잡성을 제거하고 개발자 경험을 극대화한 현대적인 CLI 도구입니다.

  ---

### 주요 옵션 및 사용법


┌──────────────────┬───────────────────────────┬───────────────────────────────────────────────────────────────────────────────────────────────┐
│ 기능             │ 문법 / 옵션               │ 설명                                                                                          │
├──────────────────┼───────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────┤
│ 기본 요청        │ http [METHOD] <URL>       │ METHOD를 생략하면 GET이 기본값입니다. (예: http example.com)                                  │
│ 데이터 전송      │ key=value key:=json_value │ 문자열, 숫자, boolean, JSON 객체 등을 쉽게 전송할 수 있습니다. :=는 JSON 타입임을 명시합니다. │
│ 헤더 추가        │ 'Header-Name:Value'       │ 요청에 커스텀 HTTP 헤더를 추가합니다.                                                         │
│ 인증             │ -a, --auth                │ username:password 또는 토큰을 전달하여 인증을 수행합니다. (예: -a user:pass)                  │
│ 폼 / 파일 업로드 │ -f, --form                │ Form 요청을 보냅니다. 파일은 field_name@/path/to/file 형식으로 첨부합니다.                    │
│ 세션             │ --session=NAME            │ 여러 요청에 걸쳐 인증, 쿠키, 커스텀 헤더를 유지하는 세션을 사용합니다.                        │
│ 출력 제어        │ -p, --print               │ H(요청 헤더), B(요청 본문), h(응답 헤더), b(응답 본문) 중 원하는 부분만 출력합니다.           │
│ 리다이렉트       │ -F, --follow              │ 서버의 3xx 리다이렉트 응답을 자동으로 따라갑니다.                                             │
│ 오프라인 테스트  │ --offline                 │ 요청을 실제로 보내지 않고, 생성될 HTTP 요청 메시지만 확인하는 'dry-run' 모드입니다.           │
└──────────────────┴───────────────────────────┴───────────────────────────────────────────────────────────────────────────────────────────────┘

  ---

### Node.js 서버를 이용한 테스트 명령어 예시

아래는 위에서 만든 Node.js 테스트 서버(server.js)를 대상으로 httpie의 주요 기능을 시험해보는 명령어 목록입니다.

※ 사전 준비: server.js가 실행 중인 터미널은 그대로 켜두고, 새로운 터미널 창에서 아래 명령어들을 실행하세요.

1. 기본 GET 요청
    * 서버의 루트(/)에 간단한 GET 요청을 보냅니다.

   http :3000

2. JSON 응답 확인
    * /data 엔드포인트에 요청하여, httpie가 JSON 응답을 자동으로 예쁘게 포맷팅하는 것을 확인합니다.

   http :3000/data

3. POST 요청으로 데이터 보내기
    * /echo 엔드포인트에 이름(문자열)과 나이(숫자)를 JSON 데이터로 보냅니다.

   http POST :3000/echo name="Alice" age:=30

4. 리다이렉트 따라가기
    * --follow 옵션으로 /redirect에서 /data로의 리다이렉션을 자동으로 처리합니다.
      http --follow :3000/redirect

5. 인증 테스트
    * 먼저 인증 없이 접근하여 401 Unauthorized 오류를 확인합니다.
      http :3000/private
    * 다음으로 -a 옵션으로 올바른 인증 정보를 보내 접속에 성공합니다.

      http -a admin:password123 :3000/private

6. 파일 업로드
    * 먼저 업로드할 테스트 파일을 생성합니다.

      echo "This is a test file for httpie upload." > test.txt
    * -f (form) 옵션과 함께 필드명@파일경로 형식으로 파일을 업로드합니다.
      http -f POST :3000/upload myFile@test.txt

---

  ---

httpyac란 무엇인가?

brew install httpyac (또는 npm install -g httpyac)

httpyac는 파일 기반의 커맨드라인 HTTP 클라이언트입니다. API 요청 명세를 .http 또는 .rest 텍스트 파일에 선언적으로 작성하고, 이를 CLI에서 실행하여 API를 테스트하고 서버와
상호작용하는 도구입니다.

* 대체하는 기존 워크플로우: curl 명령어를 반복적으로 입력하는 방식, Postman/Insomnia 같은 GUI 도구

httpie가 단일 요청을 터미널에서 쉽게 보내는 데 중점을 둔다면, httpyac는 여러 API 요청들을 파일로 관리하고 자동화하는 데 특화되어 있습니다. 이는 "API 테스트의
코드화(Infrastructure as Code)" 개념을 터미널에 도입한 것과 같습니다.

* 선언적인 요청 관리: API 요청 스펙이 텍스트 파일에 존재하므로, Git으로 버전을 관리하고, 동료와 공유하며, 코드 리뷰(PR)까지 할 수 있습니다.
* 강력한 자동화 및 CI/CD 연동: CLI 기반이므로 GitHub Actions, Jenkins 등 CI/CD 파이프라인에 쉽게 통합하여 API 회귀 테스트(Regression Test)를 자동화할 수 있습니다.
* 지능적인 컨텍스트: 변수({{...}}), 환경(.env), 요청 간 값 공유 등 복잡한 시나리오를 파일 내에서 체계적으로 관리할 수 있습니다.
* 다양한 프로토콜 지원: REST API는 물론 GraphQL, WebSocket, gRPC 등 현대적인 프로토콜을 폭넓게 지원합니다.

결론적으로 httpyac는 일회성 테스트를 넘어, 재사용 가능하고, 버전 관리가 되며, 자동화가 가능한 API 테스트 스위트를 구축하는 데 최적화된 현대적인 CLI 도구입니다.

  ---

주요 문법 및 옵션

httpyac는 .http 파일 내의 특정 문법과, 이를 실행하는 send 명령어의 옵션으로 구성됩니다.


┌───────────────┬──────────────────────────────────────┬──────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 기능          │ 문법 / 옵션                          │ 설명                                                                                                         │
├───────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ 기본 요청     │ METHOD <URL>                         │ .http 파일 내에 요청의 메서드와 URL을 작성합니다. (예: GET http://localhost:3000)                            │
│ 요청 구분     │ ###                                  │ 파일 내에서 여러 개의 요청을 구분하는 구분자입니다.                                                          │
│ 요청 식별     │ @name <NAME><br/>@tag <TAG>          │ 각 요청에 고유한 이름이나 태그를 부여하여 특정 요청만 실행할 수 있게 합니다.                                 │
│ 변수 사용     │ {{variable_name}}                    │ 파일 상단이나 .env 파일에 정의된 변수를 사용합니다.                                                          │
│ 헤더/본문     │ Header: Value<br/>{ "json": "body" } │ URL 바로 아랫줄부터 헤더와 본문을 작성합니다.                                                                │
│ 요청 실행     │ httpyac send <file>                  │ 작성된 .http 파일을 실행하는 기본 명령어입니다.                                                              │
│ **특정 요청 ... │ -n, --name <NAME><br/> -t, --tag ... │ 이름 또는 태그를 지정하여 원하는 요청만 골라서 실행합니다.                                                   │
│ **환경/변수 ... │ -e, --env <ENV><br/>`--var <key=v... │ 특정 환경(dev, prod)을 지정하거나, CLI에서 직접 변수를 주입합니다.                                           │
│ 출력/리포팅   │ --json<br/>--junit<br/>-o <file>     │ 실행 결과를 JSON, JUnit XML 형식으로 출력하거나, 응답 본문을 파일로 저장합니다. 자동화에 핵심적인 기능입...  │
│ 실행 제어     │ -a, --all<br/>--bail                 │ 파일 내 모든 요청을 실행하거나, 실패 시 즉시 중단시킬 수 있습니다.                                           │
└───────────────┴──────────────────────────────────────┴──────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

---

Node.js 서버를 이용한 테스트 명령어 예시

아래는 위에서 만든 server.js를 대상으로 httpyac의 주요 기능을 시험해보는 명령어 목록입니다.

※ 사전 준비:
1. server.js가 실행 중인 터미널은 그대로 켜두고, 새로운 터미널 창에서 http 폴더의 http 를 실행해주세요.

2. `httpyac` 명령어로 테스트 실행

1. JSON 응답 확인
   * @name getJsonData 요청만 지정하여 실행합니다.

   httpyac send general.http -n getJsonData

2. POST 요청으로 데이터 보내기
   * @name echoJson 요청을 실행합니다. 파일 내의 $randomInt 같은 동적 변수는 httpyac가 실행 시점에 자동으로 생성해줍니다.

   httpyac send general.http -n echoJson

3. 인증 테스트
   * --var 옵션으로 username과 password 변수를 CLI에서 직접 주입하여 인증에 성공합니다.

   httpyac send auth.http -n authSuccess --var username=admin password=password123
   * 미리 정의된 실패 케이스를 실행합니다.

   httpyac send server_tests.http -n authFailure

4. 파일 업로드
   * 먼저 업로드할 테스트 파일을 생성합니다.

   echo "This is a test file for httpyac upload." > test.txt
   * @name uploadFile 요청을 실행하여 파일을 업로드합니다.

   httpyac send upload.http -n uploadFile

5. 모든 테스트 자동 실행
   * --all 옵션으로 파일 내 모든 요청을 실행하고, --bail 옵션으로 중간에 하나라도 실패하면 즉시 중단시킵니다. CI/CD 환경에서 API 회귀 테스트를 자동화하는 핵심적인 방법입니다.

httpyac send general.http --all --bail